<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriConnect - Solution Architecture Diagram</title>
    <style>
        @page {
            size: A4 landscape;
            margin: 1cm;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #2ecc71 0%, #3498db 100%);
            color: white;
            border-radius: 10px;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .architecture {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .layer {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            background: white;
            position: relative;
        }

        .layer-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }

        .layer-hardware {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .layer-hardware .layer-title {
            background: #4caf50;
            color: white;
        }

        .layer-gateway {
            background: #fff3e0;
            border-color: #ff9800;
        }

        .layer-gateway .layer-title {
            background: #ff9800;
            color: white;
        }

        .layer-cloud {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .layer-cloud .layer-title {
            background: #2196f3;
            color: white;
        }

        .layer-ai {
            background: #f3e5f5;
            border-color: #9c27b0;
        }

        .layer-ai .layer-title {
            background: #9c27b0;
            color: white;
        }

        .layer-dashboard {
            background: #fce4ec;
            border-color: #e91e63;
        }

        .layer-dashboard .layer-title {
            background: #e91e63;
            color: white;
        }

        .components {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .component {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .component-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
            color: #333;
        }

        .component-details {
            font-size: 12px;
            color: #666;
            line-height: 1.6;
        }

        .component-details ul {
            list-style: none;
            padding-left: 0;
        }

        .component-details li:before {
            content: "‚Ä¢ ";
            color: #2196f3;
            font-weight: bold;
        }

        .arrow {
            text-align: center;
            font-size: 24px;
            color: #2196f3;
            margin: 10px 0;
        }

        .tech-stack {
            margin-top: 30px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
        }

        .tech-stack h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .tech-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #9c27b0;
        }

        .tech-item h4 {
            font-size: 14px;
            margin-bottom: 5px;
            color: #9c27b0;
        }

        .tech-item p {
            font-size: 12px;
            color: #666;
        }

        .metrics {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .metric {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #2196f3;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 12px;
            color: #666;
        }

        .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 12px;
            color: #666;
            padding: 20px;
            border-top: 2px solid #e0e0e0;
        }

        @media print {
            body {
                padding: 0;
            }
            .container {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üåæ AgriConnect - AI-Powered Precision Agriculture</h1>
            <p>Cloud-Connected IoT System with TensorFlow.js Neural Networks</p>
            <p style="font-size: 14px; margin-top: 5px;">AI for All Global Impact Challenge 2026 - Architecture Diagram</p>
        </div>

        <!-- Architecture Layers -->
        <div class="architecture">

            <!-- Layer 1: Field Sensing -->
            <div class="layer layer-hardware">
                <div class="layer-title">LAYER 1: FIELD SENSING & DATA COLLECTION</div>
                <div class="components">
                    <div class="component">
                        <div class="component-title">üì° Field Nodes (ESP32 + LoRa)</div>
                        <div class="component-details">
                            <ul>
                                <li>DHT22: Temperature & Humidity</li>
                                <li>Capacitive: Soil Moisture</li>
                                <li>Sensors: pH, EC, NPK</li>
                                <li>LoRa 868/915MHz (2-5km range)</li>
                                <li>Battery: 6-12 months life</li>
                                <li>15-minute data intervals</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üîã Power & Communication</div>
                        <div class="component-details">
                            <ul>
                                <li>Solar + Battery backup</li>
                                <li>Low-power sleep modes</li>
                                <li>LoRa mesh networking</li>
                                <li>Weatherproof (IP67)</li>
                                <li>Cost: $50-80 per node</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è LoRa Wireless (2-5km range, ultra-low power)</div>

            <!-- Layer 2: Gateway -->
            <div class="layer layer-gateway">
                <div class="layer-title">LAYER 2: GATEWAY & EDGE PROCESSING</div>
                <div class="components">
                    <div class="component">
                        <div class="component-title">üåê ESP32 Gateway</div>
                        <div class="component-details">
                            <ul>
                                <li>LoRa receiver (collect from nodes)</li>
                                <li>WiFi/Cellular connectivity</li>
                                <li>Local data buffer (LittleFS)</li>
                                <li>MQTT client (encrypted)</li>
                                <li>Offline resilience</li>
                                <li>Fallback local dashboard</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è MQTT over TLS (Encrypted, Reliable)</div>

            <!-- Layer 3: Cloud Infrastructure -->
            <div class="layer layer-cloud">
                <div class="layer-title">LAYER 3: CLOUD INFRASTRUCTURE</div>
                <div class="components">
                    <div class="component">
                        <div class="component-title">‚òÅÔ∏è HiveMQ Cloud (MQTT Broker)</div>
                        <div class="component-details">
                            <ul>
                                <li>Real-time message routing</li>
                                <li>QoS 1 (at least once delivery)</li>
                                <li>TLS 1.3 encryption</li>
                                <li>Topics: agriconnect/{farm}/{field}/{zone}</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üóÑÔ∏è Supabase Database (PostgreSQL)</div>
                        <div class="component-details">
                            <ul>
                                <li>sensor_readings (time-series)</li>
                                <li>satellite_ndvi_history</li>
                                <li>alert_emails_log, sms_alerts_log</li>
                                <li>Realtime subscriptions</li>
                                <li>Row-Level Security (RLS)</li>
                                <li>Automatic backups</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üîî External Integrations</div>
                        <div class="component-details">
                            <ul>
                                <li>Twilio API: SMS alerts</li>
                                <li>Resend API: Email notifications</li>
                                <li>Copernicus Sentinel: Satellite imagery</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è REST APIs / Realtime Subscriptions</div>

            <!-- Layer 4: AI/ML Processing -->
            <div class="layer layer-ai">
                <div class="layer-title">LAYER 4: AI/ML INTELLIGENCE (TensorFlow.js 4.15.0)</div>
                <div class="components">
                    <div class="component">
                        <div class="component-title">ü§ñ Yield Prediction Model</div>
                        <div class="component-details">
                            <ul>
                                <li>Type: Feedforward Neural Network</li>
                                <li>Architecture: 8 ‚Üí 32 ‚Üí 16 ‚Üí 8 ‚Üí 1</li>
                                <li>Input: Temp, humidity, soil, NDVI, etc.</li>
                                <li>Output: Crop yield (tons/hectare)</li>
                                <li>Performance: MAE 0.5 t/ha, R¬≤ 0.85</li>
                                <li>Training: 50 epochs, Adam optimizer</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üîç Anomaly Detection Model</div>
                        <div class="component-details">
                            <ul>
                                <li>Type: Autoencoder</li>
                                <li>Architecture: 8 ‚Üí 16 ‚Üí 4 ‚Üí 16 ‚Üí 8</li>
                                <li>Method: Reconstruction error</li>
                                <li>Threshold: >0.15 = anomaly</li>
                                <li>Performance: TPR 90%, FPR <5%</li>
                                <li>Use: Sensor malfunction detection</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üìà Time-Series Forecasting</div>
                        <div class="component-details">
                            <ul>
                                <li>Type: LSTM Network</li>
                                <li>Architecture: 64 ‚Üí 32 units</li>
                                <li>Lookback: 24 hours</li>
                                <li>Forecast: 48 hours ahead</li>
                                <li>Performance: MAE 2¬∞C (temp)</li>
                                <li>Use: Irrigation scheduling</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üõ∞Ô∏è Satellite NDVI Analysis</div>
                        <div class="component-details">
                            <ul>
                                <li>Source: Copernicus Sentinel-2</li>
                                <li>Calculation: (NIR - Red) / (NIR + Red)</li>
                                <li>Resolution: 10m/pixel</li>
                                <li>Frequency: Every 5 days</li>
                                <li>Output: Health score, stressed areas</li>
                                <li>Processing: Turf.js geospatial</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.5); border-radius: 5px; font-size: 12px;">
                    <strong>üöÄ Execution:</strong> Browser-based ML (WebGL GPU acceleration) |
                    <strong>üíæ Storage:</strong> IndexedDB (offline model persistence) |
                    <strong>üìä Data:</strong> Proprietary training datasets from deployed sensors
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è WebGL / JavaScript APIs</div>

            <!-- Layer 5: Dashboard -->
            <div class="layer layer-dashboard">
                <div class="layer-title">LAYER 5: WEB DASHBOARD (Progressive Web App)</div>
                <div class="components">
                    <div class="component">
                        <div class="component-title">üìä Real-Time Monitoring</div>
                        <div class="component-details">
                            <ul>
                                <li>Live sensor data (auto-refresh)</li>
                                <li>Interactive charts (Chart.js)</li>
                                <li>Alert notifications</li>
                                <li>Historical trends</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üó∫Ô∏è Interactive Map</div>
                        <div class="component-details">
                            <ul>
                                <li>Mapbox GL JS</li>
                                <li>Sensor node markers</li>
                                <li>Field polygons</li>
                                <li>NDVI heatmaps</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üß† AI Insights Panel</div>
                        <div class="component-details">
                            <ul>
                                <li>Yield predictions</li>
                                <li>48h forecasts</li>
                                <li>Anomaly alerts</li>
                                <li>Recommendations</li>
                            </ul>
                        </div>
                    </div>
                    <div class="component">
                        <div class="component-title">üì± PWA Features</div>
                        <div class="component-details">
                            <ul>
                                <li>Installable (mobile/desktop)</li>
                                <li>Offline-first design</li>
                                <li>Push notifications</li>
                                <li>3G/4G compatible</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è Multi-Device Access (Desktop, Tablet, Mobile)</div>

            <!-- Users -->
            <div style="text-align: center; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
                <h3 style="margin-bottom: 10px;">üë®‚Äçüåæ END USERS</h3>
                <div style="display: flex; justify-content: space-around; margin-top: 15px;">
                    <div>
                        <strong>Smallholder Farmers</strong><br>
                        <small>Monitor, Alerts, Insights</small>
                    </div>
                    <div>
                        <strong>Agronomists</strong><br>
                        <small>Analysis, Advisory, Research</small>
                    </div>
                    <div>
                        <strong>Farm Managers</strong><br>
                        <small>Reporting, ROI Tracking</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Technology Stack -->
        <div class="tech-stack">
            <h3>üõ†Ô∏è Technology Stack & Resources</h3>
            <div class="tech-grid">
                <div class="tech-item">
                    <h4>Open Source (Apache/MIT)</h4>
                    <p>TensorFlow.js, Chart.js, Mapbox GL, Turf.js, Supabase Client</p>
                </div>
                <div class="tech-item">
                    <h4>Proprietary (AgriConnect)</h4>
                    <p>Custom ML models, training pipeline, NDVI algorithms, alert logic</p>
                </div>
                <div class="tech-item">
                    <h4>Licensed (Free/Open Access)</h4>
                    <p>Copernicus Sentinel-2 satellite imagery (ESA Open Access)</p>
                </div>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="metrics">
            <div class="metric">
                <div class="metric-value">&lt;5s</div>
                <div class="metric-label">Sensor ‚Üí Dashboard Latency</div>
            </div>
            <div class="metric">
                <div class="metric-value">&lt;50ms</div>
                <div class="metric-label">ML Inference Time</div>
            </div>
            <div class="metric">
                <div class="metric-value">99.9%</div>
                <div class="metric-label">Cloud Uptime</div>
            </div>
            <div class="metric">
                <div class="metric-value">2-5km</div>
                <div class="metric-label">LoRa Communication Range</div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <strong>AgriConnect</strong> - Cloud-Connected Precision Agriculture for Smallholder Farmers<br>
            AI for All Global Impact Challenge 2026 | Theme: Agriculture<br>
            Powered by TensorFlow.js Neural Networks | Target: 1M Farmers by 2030
        </div>
    </div>

    <script>
        // Add print button functionality
        window.onload = function() {
            console.log('Architecture diagram loaded. Use Ctrl+P or Cmd+P to print as PDF.');
        }
    </script>
</body>
</html>